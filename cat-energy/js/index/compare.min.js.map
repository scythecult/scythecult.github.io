{"version":3,"sources":["index/compare.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","Compare","this","ValueMap","MAX_PRECENT","sliderPin","document","querySelector","slideRange","progressBar","photo","controls","mql","window","matchMedia","boundControls","onControlsClick","bind","boundSlide","onSlideMouseDown","boundMql","mqlHandler","addEventListener","value","evt","matches","setSliderDefaults","style","width","concat","left","offsetWidth","_this","preventDefault","start","Coords","clientX","onMousemove","moveEvt","shift","x","pinCoordX","offsetLeft","pinPoint","Math","round","onMouseup","removeEventListener","before","closest","after","setBeforeStatement","setAfterStatement","compare"],"mappings":"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","file":"compare.min.js","sourcesContent":["\"use strict\";\n\nclass Compare {\n  constructor() {\n    this.ValueMap = {\n      MAX_PRECENT: 100,\n    };\n    this.sliderPin = document.querySelector(\".compare__slide-button\");\n    this.slideRange = document.querySelector(\".compare__range\");\n    this.progressBar = document.querySelector(\".compare__progress-bar\");\n    this.photo = document.querySelector(\".compare__image--before\");\n    this.controls = document.querySelector(\".compare__controls\");\n    this.mql = window.matchMedia(\"(min-width: 768px)\");\n\n    this.boundControls = this.onControlsClick.bind(this);\n    this.boundSlide = this.onSlideMouseDown.bind(this);\n    this.boundMql = this.mqlHandler.bind(this);\n\n    this.controls.addEventListener(\"click\", this.boundControls);\n    this.sliderPin.addEventListener(\"mousedown\", this.boundSlide);\n    this.mql.addEventListener(\"change\", this.boundMql);\n    this.mqlHandler(this.mql);\n  }\n\n  mqlHandler(evt) {\n    if (evt.matches) {\n      this.setSliderDefaults();\n    } else {\n      this.setSliderDefaults();\n    }\n  }\n\n  setSliderDefaults() {\n    this.photo.style.width = `${this.ValueMap.MAX_PRECENT / 2}%`;\n    this.sliderPin.style.left = `${this.slideRange.offsetWidth / 2}px`;\n    this.progressBar.style.width = `${this.slideRange.offsetWidth / 2}px`;\n  }\n\n  onSlideMouseDown(evt) {\n    evt.preventDefault();\n\n    let start = new Coords(evt.clientX);\n\n    const onMousemove = (moveEvt) => {\n      moveEvt.preventDefault();\n      let shift = new Coords(start.x - moveEvt.clientX);\n      let pinCoordX = this.sliderPin.offsetLeft - shift.x;\n      start = new Coords(moveEvt.clientX);\n\n      if (\n        !(\n          pinCoordX < 0 ||\n          pinCoordX > this.slideRange.offsetWidth - this.sliderPin.offsetWidth\n        )\n      ) {\n        let pinPoint = pinCoordX / this.slideRange.offsetWidth;\n\n        this.sliderPin.style.left = `${this.sliderPin.offsetLeft - shift.x}px`;\n        this.progressBar.style.width = `${\n          this.sliderPin.offsetLeft - shift.x\n        }px`;\n        this.photo.style.width = `${Math.round(\n          pinPoint * this.ValueMap.MAX_PRECENT\n        )}%`;\n      }\n    };\n\n    const onMouseup = () => {\n      document.removeEventListener(\"mousemove\", onMousemove);\n      document.removeEventListener(\"mousemove\", onMouseup);\n    };\n\n    document.addEventListener(\"mousemove\", onMousemove);\n    document.addEventListener(\"mouseup\", onMouseup);\n\n    function Coords(x) {\n      this.x = x;\n    }\n  }\n\n  onControlsClick(evt) {\n    evt.preventDefault();\n\n    let before = evt.target.closest(\".compare__text--before\");\n    let after = evt.target.closest(\".compare__text--after\");\n\n    if (!before && !after) return;\n\n    if (before) {\n      this.setBeforeStatement();\n    }\n\n    if (after) {\n      this.setAfterStatement();\n    }\n  }\n\n  setBeforeStatement() {\n    this.photo.style.width = `${0}%`;\n    this.sliderPin.style.left = `${0}px`;\n    this.progressBar.style.width = `${0}px`;\n  }\n\n  setAfterStatement() {\n    this.photo.style.width = `${this.ValueMap.MAX_PRECENT}%`;\n    this.sliderPin.style.left = `${\n      this.slideRange.offsetWidth - this.sliderPin.offsetWidth\n    }px`;\n    this.progressBar.style.width = `${\n      this.slideRange.offsetWidth - this.sliderPin.offsetWidth\n    }px`;\n  }\n}\n\nlet compare = new Compare();\n"]}